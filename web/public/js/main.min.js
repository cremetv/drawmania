"use strict";
/*! @license
* Drawmania
* Discord Bot Web Interface
* © 2019 Marcel Hauser (https://ice-creme.de)
*/function toggleEmojiBox(){emojiOpen?($(".emoji-box").removeClass("open"),emojiOpen=!1):($(".emoji-box").addClass("open"),emojiOpen=!0)}function sendMessage(){if(""!=$("#input").val()){socket.emit("chat message",{message:$("#input").val(),serverId:$("#serverId").val(),channelId:$("#channelId").val()});var e='\n  <div class="message">\n    <div class="message__details">sent to --> <span class="message__channel">'+$("#serverId option:selected").text()+" : "+$("#channelId option:selected").text()+'</span></div>\n    <div class="message__text">\n      '+$("#input").val()+"\n    </div>\n  </div>\n  ";return $("#chat").append(e),$("#input").val(""),scrollMessages(),!1}}var chat=$("#chat"),scrollMessages=function(){var e=chat[0].scrollHeight;TweenLite.to(chat,2,{scrollTo:e,ease:Power2.easeOut})};$(function(){var e=navigator.userAgent.toLowerCase();if(/(chrome|firefox|safari)/.test(e.toLowerCase())){var s=["padding: 20px 5px 16px","background-color: #36393E","color: #f2641c"].join(";"),n=["padding: 20px 5px 16px","background-color: #f2641c","color: #ffffff"].join(";"),a=["background-color: transparent"].join(";");console.log("\n\n %c Crafted with ♥︎ by Ice Creme %c https://ice-creme.de/ %c \n\n\n",s,n,a)}else window.console&&console.log("Crafted with love by Ice Creme - https://ice-creme.de/")});var socket=io(),emojiOpen=!1;$(".emoji-btn").on("click",toggleEmojiBox),$(".emoji-list li").on("click",function(){toggleEmojiBox()});var getChannels=function(e){var s={serverId:e.toString()};$.ajax({crossDomain:!0,method:"POST",url:"/getServer",async:!0,data:s,error:function(e){console.error(e)}}).done(function(e){$("#channelId option").remove();for(var s=0;s<e.length;s++)$("#channelId").append('<option value="'+e[s].id+'">'+e[s].name+"</option>")})};$(".server-list .server").first().parent("li").addClass("active"),$("#serverId").on("change",function(e){var s=$("#serverId").val();getChannels(s)}),$(".server").on("click",function(e){e.preventDefault(),$(".server").parent("li").removeClass("active"),$(this).parent("li").addClass("active");var s=$(this).attr("data-server");$("#serverId").val(s),$(".server-name").html($(this).attr("data-servername")),getChannels(s)}),$(".send-btn").on("click",function(e){e.preventDefault(),sendMessage()}),$("#input").on("keyup",function(e){13===e.which&&sendMessage()}),socket.on("status update",function(e){"offline"===e.status?$(".logo").removeClass("online").addClass("offline"):"online"===e.status&&$(".logo").removeClass("offline").addClass("online")}),socket.on("some event",function(){}),socket.on("discord message",function(e){var s='\n  <div class="message">\n    <div class="message__details"><span class="message__author">'+e.author+'<span> @ <span class="message__channel--receive">'+e.server+" : "+e.channel+'</span></div>\n    <div class="message__text">\n      '+e.message+"\n    </div>\n  </div>\n  ";$("#chat").append(s),scrollMessages();var n=$(".stat--messages"),a=parseInt(n.find(".stat__value").html());n.find(".stat__value").html(a++),testUpdateStat(n)});var testUpdateStat=function(e){var s=new TimelineMax;s.set(e,{boxShadow:"inset 0px 0 0 0 rgba(46, 204, 113, 1)"}),s.to(e,.2,{boxShadow:"inset 5px 0 0 0 rgba(46, 204, 113, 1)",ease:Power4.easeInOut}),s.to(e,.8,{delay:1,boxShadow:"inset 5px 0 0 0 rgba(46, 204, 113, 0)",ease:Power4.easeInOut})};